function getLargestProduct(a,r=[],q=[],z=[],w=[],m=0){
  const y=(x,z=x.slice().map(e=>e.slice()),a=[])=>{
    for(let i=0;i<z.length;i++)z[i][i]='&'
    z=z.map(e=>[e.slice(0,e.indexOf('&')),e.slice(e.indexOf('&')+1)])
    for(let i=0;i<z.length;i++){
      while(!z.every(e=>!e[0].length)){
        let t=[]
        for(let j=0;j<z.length;j++)t.push(z[j][0].pop())
        a.push(t.filter(e=>e!==undefined))
      }
    }
    z=z.map(e=>e[1])
    for(let i=0;i<z.length;i++){
      while(!z.every(e=>!e.length)){
        let t=[]
        for(let j=0;j<z.length;j++)t.push(z[j].shift())
        a.push(t.filter(e=>e!==undefined))
      }
    }
    return a
  }
  for(let i=0;i<a[0].length;i++){
    let t=[]
    for(let j=0;j<a.length;j++)t.push(a[j][i])
    r.push(t)
  }
  for(let i=0;i<a.length;i++){
    for(let j=0;j<a[0].length;j++){
    if(i===j)w.push(a[i][j])
    if(i+j===a[0].length-1)q.push(a[i][j])
    }
  }
  z.push(w,q)
  z=y(a).concat(z).concat(r).concat(a).concat(y(a.slice().map(e=>e.slice().reverse()).reverse())).concat(y(a.slice().reverse()))
  z.forEach(e=>{
    for(let i=0;i<e.length;i++){
      m=Math.max(e.slice(i,i+4).reduce((a,c)=>a*c,1),m)
    }
  })
  return m
}

console.log(getLargestProduct( [
  [01, 01, 01, 01],
  [04, 04, 04, 04],
  [01, 01, 01, 01],
  [01, 01, 01, 01],
]))
console.log(getLargestProduct(  [
  [01, 01, 01, 04],
  [01, 01, 01, 04],
  [01, 01, 01, 04],
  [01, 01, 01, 04],
]))
console.log(getLargestProduct([
  [04, 01, 01, 01, 01, 06],
  [01, 14, 01, 01, 12, 01],
  [01, 01, 27, 01, 01, 01],
  [01, 01, 01, 68, 01, 01],
  [01, 09, 01, 01, 92, 01],
  [22, 01, 01, 01, 01, 04],
]))
console.log(getLargestProduct([ [ 42,
  3,
  37,
  18,
  71,
  77,
  12,
  27,
  39,
  48,
  50,
  42,
  95,
  13,
  74,
  8,
  6,
  59,
  65,
  10,
  44,
  8,
  63,
  64,
  35,
  78 ],
[ 4,
  35,
  49,
  38,
  18,
  22,
  77,
  15,
  94,
  56,
  81,
  68,
  66,
  3,
  79,
  58,
  93,
  77,
  39,
  53,
  92,
  84,
  25,
  25,
  22,
  73 ],
[ 57,
  46,
  85,
  15,
  68,
  8,
  44,
  22,
  23,
  18,
  91,
  48,
  21,
  22,
  87,
  35,
  77,
  28,
  91,
  67,
  19,
  38,
  93,
  44,
  43,
  7 ],
[ 99,
  49,
  67,
  6,
  83,
  82,
  2,
  25,
  81,
  22,
  60,
  94,
  45,
  15,
  7,
  39,
  80,
  72,
  60,
  92,
  73,
  33,
  84,
  49,
  45,
  88 ],
[ 84,
  73,
  64,
  61,
  92,
  50,
  71,
  52,
  32,
  43,
  31,
  73,
  97,
  68,
  64,
  81,
  8,
  28,
  10,
  58,
  88,
  98,
  12,
  28,
  10,
  75 ],
[ 31,
  36,
  42,
  72,
  7,
  19,
  71,
  86,
  55,
  96,
  51,
  26,
  62,
  4,
  43,
  48,
  83,
  84,
  25,
  37,
  36,
  59,
  30,
  99,
  78,
  4 ],
[ 70,
  99,
  65,
  90,
  61,
  17,
  73,
  46,
  44,
  76,
  7,
  23,
  29,
  42,
  1,
  44,
  39,
  89,
  51,
  58,
  78,
  81,
  94,
  60,
  63,
  86 ],
[ 10,
  82,
  57,
  45,
  85,
  36,
  20,
  55,
  35,
  14,
  84,
  51,
  49,
  78,
  80,
  21,
  74,
  17,
  24,
  37,
  97,
  90,
  63,
  71,
  55,
  90 ],
[ 67,
  46,
  15,
  84,
  18,
  86,
  61,
  17,
  46,
  31,
  87,
  90,
  66,
  70,
  21,
  90,
  64,
  37,
  35,
  11,
  73,
  10,
  47,
  73,
  55,
  27 ],
[ 25,
  85,
  17,
  56,
  20,
  26,
  49,
  1,
  5,
  49,
  67,
  50,
  79,
  81,
  84,
  52,
  35,
  26,
  15,
  64,
  78,
  90,
  64,
  18,
  43,
  8 ],
[ 92,
  44,
  17,
  70,
  61,
  16,
  11,
  4,
  92,
  61,
  8,
  33,
  5,
  20,
  90,
  15,
  77,
  4,
  29,
  93,
  23,
  65,
  99,
  34,
  51,
  79 ],
[ 17,
  99,
  79,
  9,
  54,
  2,
  1,
  49,
  77,
  84,
  77,
  49,
  81,
  56,
  70,
  3,
  18,
  61,
  37,
  36,
  35,
  38,
  88,
  99,
  70,
  30 ],
[ 15,
  78,
  43,
  76,
  35,
  20,
  9,
  6,
  20,
  74,
  56,
  93,
  98,
  35,
  97,
  85,
  65,
  59,
  69,
  65,
  54,
  56,
  34,
  57,
  29,
  94 ],
[ 36,
  34,
  14,
  80,
  36,
  20,
  57,
  2,
  38,
  51,
  74,
  80,
  14,
  50,
  65,
  9,
  39,
  45,
  66,
  96,
  26,
  94,
  5,
  54,
  80,
  43 ],
[ 5,
  46,
  33,
  92,
  15,
  94,
  39,
  55,
  95,
  38,
  87,
  14,
  65,
  64,
  69,
  83,
  64,
  12,
  63,
  28,
  58,
  40,
  74,
  86,
  19,
  38 ],
[ 75,
  38,
  69,
  83,
  46,
  47,
  23,
  36,
  96,
  3,
  76,
  58,
  87,
  14,
  82,
  30,
  70,
  87,
  16,
  37,
  66,
  19,
  36,
  53,
  61,
  12 ],
[ 43,
  26,
  78,
  95,
  97,
  53,
  92,
  24,
  70,
  27,
  97,
  16,
  72,
  11,
  18,
  76,
  51,
  28,
  39,
  26,
  34,
  23,
  9,
  61,
  84,
  82 ],
[ 90,
  65,
  31,
  27,
  39,
  27,
  73,
  99,
  70,
  59,
  22,
  82,
  37,
  9,
  79,
  93,
  54,
  2,
  4,
  18,
  11,
  34,
  57,
  77,
  81,
  56 ],
[ 32,
  92,
  78,
  36,
  93,
  71,
  80,
  36,
  26,
  23,
  63,
  33,
  70,
  59,
  87,
  65,
  68,
  60,
  20,
  42,
  77,
  73,
  17,
  4,
  26,
  68 ],
[ 49,
  69,
  88,
  23,
  70,
  54,
  88,
  25,
  53,
  53,
  71,
  67,
  6,
  81,
  13,
  33,
  26,
  57,
  2,
  60,
  14,
  21,
  5,
  79,
  58,
  56 ],
[ 84,
  39,
  12,
  43,
  72,
  96,
  62,
  8,
  58,
  40,
  25,
  54,
  22,
  64,
  57,
  4,
  92,
  80,
  76,
  28,
  35,
  44,
  76,
  1,
  49,
  9 ],
[ 55,
  21,
  90,
  48,
  7,
  28,
  57,
  1,
  57,
  49,
  89,
  40,
  69,
  11,
  47,
  28,
  25,
  91,
  97,
  14,
  58,
  42,
  61,
  5,
  25,
  7 ],
[ 53,
  60,
  88,
  40,
  58,
  90,
  42,
  28,
  96,
  57,
  44,
  23,
  87,
  84,
  86,
  17,
  80,
  92,
  9,
  10,
  6,
  43,
  60,
  6,
  36,
  28 ],
[ 56,
  58,
  75,
  42,
  81,
  58,
  89,
  16,
  54,
  64,
  39,
  90,
  34,
  8,
  1,
  56,
  74,
  33,
  51,
  17,
  21,
  88,
  70,
  89,
  89,
  87 ],
[ 16,
  87,
  43,
  75,
  76,
  74,
  89,
  79,
  38,
  22,
  98,
  56,
  45,
  42,
  58,
  64,
  56,
  20,
  78,
  38,
  35,
  81,
  55,
  32,
  8,
  85 ],
[ 74,
  53,
  77,
  5,
  93,
  12,
  87,
  14,
  95,
  51,
  18,
  15,
  22,
  73,
  86,
  53,
  23,
  63,
  71,
  66,
  79,
  89,
  23,
  61,
  34,
  76 ] ]))