const f=(a,x,y)=>{
	let r=[],t=[]
	for(let i=x+1,j=y+1;i<a.length&&j>-1;i++,j++)t.push(a[i][j])
	r.push(t),t=[]
	for(let i=x-1,j=y+1;i>-1&&j<a[0].length;i--,j++)t.push(a[i][j])
	r.push(t),t=[]
	for(let i=x+1,j=y-1;i<a.length&&j>-1;i++,j--)t.push(a[i][j])
	r.push(t),t=[]
	for(let i=x-1,j=y-1;x>-1&&j>-1;i--,j--)if(a[i])t.push(a[i][j])
	r.push(t),r.push(a[x]),r.push(a[0].map((e,i)=>a.map(u=>u[i]))[y]),r.push([[x-2,y-1],[x-2,y+1],[x+2,y+1],[x+2,y-1],[x-1,y-2],[x-1,y+2],[x+1,y+2],[x+1,y-2]].filter(e=>e[0]>-1&&e[0]<a.length&&e[1]>-1&&e[1]<a[0].length).map(e=>a[e[0]][e[1]]).filter(e=>e=='♞'))
	return r
}
function kingIsInCheck(a){
	let b=a.map((e,i)=>e.map((u,j)=>u=='♔'?[i,j]:'').filter(z=>z)).filter(e=>e.length)[0][0]
	if(!b)return false
	let r=f(a,b[0],b[1])
	if(r[r.length-1].length||r[1][0]=='♟'||r[3][0]=='♟')return true
	r=r.map((e,i)=>{
		if(i<4)return e[e.findIndex(u=>u!=' '&&u!='♔')]||false
			return e
	})
	let x=r.slice(0,4).filter(e=>e)
	if(x.includes('♝')||x.includes('♛'))return true
	r=r.slice(4).filter(e=>e.length).map((e,i)=>{
		let y=e.findIndex(u=>u=='♔'),t,k
			for(let j=y;--j>-1;){
				if(e[j]!=' '){
					t=j
					break
				}
			}
			for(let j=y;++j<e.length;){
				if(e[j]!=' '){
					k=j
					break
				}
			}
			return e.slice(t?t:0,k?k+1:e.length)
	})
	return r.some(e=>e[0]=='♜'||e[e.length-1]=='♜'||e[0]=='♛'||e[e.length-1]=='♛')
}

console.log(kingIsInCheck([
	[
	  ' ', ' ', ' ',
	  ' ', ' ', ' ',
	  '♝', '♞'
	],
	[
	  '♜', ' ', ' ',
	  ' ', ' ', ' ',
	  ' ', ' '
	],
	[
	  ' ', ' ', ' ',
	  ' ', ' ', ' ',
	  '♔', ' '
	],
	[
	  ' ', ' ', ' ',
	  '♟', ' ', ' ',
	  ' ', ' '
	],
	[
	  ' ', ' ', ' ',
	  ' ', ' ', ' ',
	  ' ', '♝'
	],
	[
	  ' ', ' ', ' ',
	  ' ', ' ', ' ',
	  ' ', ' '
	],
	[
	  ' ', ' ', ' ',
	  ' ', ' ', ' ',
	  ' ', ' '
	],
	[
	  ' ', ' ', ' ',
	  ' ', ' ', ' ',
	  ' ', ' '
	]
  ]))
console.log(kingIsInCheck([
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	[' ', ' ', '♔', ' ', ' ', '♜', ' ', ' '],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ']
]))
console.log(kingIsInCheck([
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	[' ', '♔', ' ', ' ', ' ', ' ', ' ', ' '],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	['♞', ' ', ' ', ' ', ' ', ' ', ' ', ' ']
]))
console.log(kingIsInCheck([
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', '♝'],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	['♔', ' ', ' ', ' ', ' ', ' ', ' ', ' ']
]))
console.log(kingIsInCheck([
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	['♛', ' ', ' ', '♞', ' ', ' ', ' ', '♛'],
	[' ', ' ', ' ', '♔', ' ', ' ', ' ', ' '],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ']
]))
console.log(kingIsInCheck([
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	[' ', '♛', ' ', '♔', ' ', ' ', ' ', ' '],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
	[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ']
]))